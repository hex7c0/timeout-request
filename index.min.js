"use strict";function wrapper(a){var b;return options.callback?function(c,d,e){function f(){c.emit("emit",c,d);{if(!a.header)return a.callback(c,d,a.data);if(!d._headerSent)return a.callback(c,d,a.data)}}return a.clear&&clearTimeout(b),b=setTimeout(f,a.milliseconds),e?e():null}:function(c,d,e){function f(){return c.emit("emit",c,d),a.header?(d._headerSent||d.end(),void(d.end=function(){})):(d.end(),void(d.end=function(){}))}return a.clear&&clearTimeout(b),b=setTimeout(f,a.milliseconds),e?e():null}}module.exports=function(a){var a=a||Object.create(null),b={milliseconds:Number(a.milliseconds)||2e3,header:Boolean(a.header),clear:0==a.clear?!1:!0};return a.callback?(b.callback=a.callback,b.data=a.data,wrapper(b,!0)):wrapper(b,!1)};
