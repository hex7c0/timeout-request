/*
 * timeout-request v1.1.0
 * (c) hex7c0 https://github.com/hex7c0/timeout-request
 * Licensed under GPLv3
 */
"use strict";function end(a){try{return a()}catch(b){return}}function wrapper(a){var b,c=a;return a.callback?function(a,d,e){function f(){a.emit("emit",a,d);{if(!g.header)return g.callback(g.data);if(!d._headerSent)return g.callback(g.data)}}var g=c;return g.clear&&clearTimeout(b),b=setTimeout(f,g.milliseconds),end(e)}:function(a,d,e){function f(){a.emit("emit",a,d);{if(!g.header)return d.end();if(!d._headerSent)return d.end()}}var g=c;return g.clear&&clearTimeout(b),b=setTimeout(f,g.milliseconds),end(e)}}module.exports=function(a){var a=a||Object.create(null),b={milliseconds:Number(a.milliseconds)||2e3,header:Boolean(a.header),clear:0==a.clear?!1:!0};return a.callback?(b.callback=a.callback,b.data=a.data,wrapper(b,!0)):wrapper(b,!1)};