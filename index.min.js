"use strict";function wrapper(a,b){var c;return c=b?a.header?function(b,c){b.emit("timeout",b,c);var d=c.finished||c.socket&&c.socket.writable===!1;return d===!1?a.callback(b,c,a.data):void 0}:function(b,c){return b.emit("timeout",b,c),a.callback(b,c,a.data)}:a.header?function(a,b){a.emit("timeout",a,b);var c=b.finished||b.socket&&b.socket.writable===!1;c===!1&&(b.end(),b.end=function(){})}:function(a,b){a.emit("timeout",a,b),b.end(),b.end=function(){}},function(b,d,e){return setTimeout(c.bind(this,b,d),a.milliseconds),e()}}function timeout(a){var b=a||Object.create(null),c={milliseconds:Number(b.milliseconds)||2e3,header:Boolean(b.header)};return b.callback?(c.callback=b.callback,c.data=b.data,wrapper(c,!0)):wrapper(c,!1)}module.exports=timeout;
